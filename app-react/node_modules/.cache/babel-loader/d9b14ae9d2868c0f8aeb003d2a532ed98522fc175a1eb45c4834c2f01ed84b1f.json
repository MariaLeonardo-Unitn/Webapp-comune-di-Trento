{"ast":null,"code":"import React,{useEffect,useState}from'react';import L from'leaflet';import'leaflet/dist/leaflet.css';import'./styles/Mappa.css';import{useNavigate}from'react-router-dom';import API_BASE_URL from\"./config\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Mappa=()=>{const navigate=useNavigate();const[coords,setCoords]=useState(null);useEffect(()=>{const map=L.map('map').setView([46.0667,11.1333],12);L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{attribution:'© OpenStreetMap contributors'}).addTo(map);const centriDiRaccolta=[{nome:\"Argentario\",coord:[46.0897,11.1212],indirizzo:\"Via Pradiscola, 22\"},{nome:\"Mattarello\",coord:[46.0023,11.1361],indirizzo:\"Via della Gotarda\"},{nome:\"Meano\",coord:[46.1112,11.1556],indirizzo:\"Via Bellaria, 44/B\"},{nome:\"Povo\",coord:[46.0605,11.1508],indirizzo:\"Via Castel di Pietrapiana, 8\"},{nome:\"Sopramonte\",coord:[46.0811,11.0974],indirizzo:\"Via Strada di Campedél\"}];centriDiRaccolta.forEach(centro=>{L.marker(centro.coord).addTo(map).bindPopup(`<b>Centro di Raccolta</b><br><b>${centro.nome}</b><br>${centro.indirizzo}`);});map.on('click',function(e){const button=document.createElement('button');button.textContent='Segnala';button.style.cursor='pointer';button.addEventListener('click',()=>{navigate('/segnalazioni',{state:{coords:e.latlng}});});const container=document.createElement('div');container.appendChild(button);L.popup().setLatLng(e.latlng).setContent(container).openOn(map);});return()=>{map.remove();};},[navigate]);const handleRedirect=()=>{navigate('/menu');};return/*#__PURE__*/_jsxs(\"div\",{className:true,children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleRedirect,class:\"back-button\",children:/*#__PURE__*/_jsx(\"img\",{src:\"https://cdn-icons-png.flaticon.com/128/507/507257.png\",alt:\"Back to Interfaccia DA\",style:{width:'30px',height:'30px'}})}),/*#__PURE__*/_jsx(\"h1\",{className:\"fade-in\",children:\"Mappa per Segnalazioni Utente\"}),/*#__PURE__*/_jsx(\"div\",{id:\"map\"})]});};export default Mappa;","map":{"version":3,"names":["React","useEffect","useState","L","useNavigate","API_BASE_URL","jsx","_jsx","jsxs","_jsxs","Mappa","navigate","coords","setCoords","map","setView","tileLayer","attribution","addTo","centriDiRaccolta","nome","coord","indirizzo","forEach","centro","marker","bindPopup","on","e","button","document","createElement","textContent","style","cursor","addEventListener","state","latlng","container","appendChild","popup","setLatLng","setContent","openOn","remove","handleRedirect","className","children","onClick","class","src","alt","width","height","id"],"sources":["/root/UNIVERSITA/Webapp-comune-di-Trento/app-react/src/Mappa.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport L from 'leaflet';\r\nimport 'leaflet/dist/leaflet.css';\r\nimport './styles/Mappa.css';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport API_BASE_URL from \"./config\";\r\n\r\n\r\nconst Mappa = () => {\r\n  const navigate = useNavigate();\r\n  const [coords, setCoords] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const map = L.map('map').setView([46.0667, 11.1333], 12);\r\n\r\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n      attribution: '© OpenStreetMap contributors'\r\n    }).addTo(map);\r\n\r\n    const centriDiRaccolta = [\r\n      {\r\n        nome: \"Argentario\",\r\n        coord: [46.0897, 11.1212],\r\n        indirizzo: \"Via Pradiscola, 22\"\r\n      },\r\n      {\r\n        nome: \"Mattarello\",\r\n        coord: [46.0023, 11.1361],\r\n        indirizzo: \"Via della Gotarda\"\r\n      },\r\n      {\r\n        nome: \"Meano\",\r\n        coord: [46.1112, 11.1556],\r\n        indirizzo: \"Via Bellaria, 44/B\"\r\n      },\r\n      {\r\n        nome: \"Povo\",\r\n        coord: [46.0605, 11.1508],\r\n        indirizzo: \"Via Castel di Pietrapiana, 8\"\r\n      },\r\n      {\r\n        nome: \"Sopramonte\",\r\n        coord: [46.0811, 11.0974],\r\n        indirizzo: \"Via Strada di Campedél\"\r\n      }\r\n    ];\r\n\r\n    centriDiRaccolta.forEach(centro => {\r\n      L.marker(centro.coord)\r\n        .addTo(map)\r\n        .bindPopup(`<b>Centro di Raccolta</b><br><b>${centro.nome}</b><br>${centro.indirizzo}`);\r\n    });\r\n\r\n    map.on('click', function (e) {\r\n      const button = document.createElement('button');\r\n      button.textContent = 'Segnala';\r\n      button.style.cursor = 'pointer'; \r\n    \r\n      button.addEventListener('click', () => {\r\n        navigate('/segnalazioni', { state: { coords: e.latlng } });\r\n      });\r\n    \r\n      const container = document.createElement('div');\r\n      container.appendChild(button);\r\n    \r\n      L.popup()\r\n        .setLatLng(e.latlng)\r\n        .setContent(container)\r\n        .openOn(map);\r\n    });\r\n\r\n    return () => {\r\n      map.remove();\r\n    };\r\n  }, [navigate]);\r\n\r\n  const handleRedirect = () => {\r\n    navigate('/menu');\r\n  };\r\n\r\n  return (\r\n    <div className>\r\n      <button onClick={handleRedirect} class=\"back-button\">\r\n        <img\r\n          src=\"https://cdn-icons-png.flaticon.com/128/507/507257.png\"\r\n          alt=\"Back to Interfaccia DA\"\r\n          style={{ width: '30px', height: '30px' }}\r\n        />\r\n      </button>\r\n      <h1 className=\"fade-in\">Mappa per Segnalazioni Utente</h1>\r\n      <div id=\"map\"></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Mappa;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}